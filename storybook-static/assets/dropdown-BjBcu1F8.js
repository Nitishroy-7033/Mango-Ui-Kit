import{j as a}from"./jsx-runtime-u17CrQMm.js";import{r as n}from"./iframe-QywSF6W6.js";import{c}from"./cn-BQHNewu7.js";import{X as L}from"./x-DSESRrVS.js";import{C as ne}from"./chevron-down-BNiyiuGD.js";import{S as te}from"./search-BLKqZgPB.js";import{C as O}from"./check-BPnGGwGE.js";import{S as P}from"./spinner-BLi69KHB.js";const E=({options:p=[],value:r,onChange:v,placeholder:A="Select option",label:y,showLabel:W=!0,icon:j,className:I="",menuClassName:H="",footer:C,header:T,searchable:Q=!1,multiple:t=!1,loading:f=!1,disabled:l=!1,trigger:o="click",variant:$="default",size:q="md",placement:X="bottom",closeOnSelect:S,noOptionsContent:_="No results found",maxHeight:F=300,onLoadMore:g,hasMore:x=!1,loadMoreThreshold:k=.8,renderOption:V,style:Y})=>{const[i,d]=n.useState(!1),[h,M]=n.useState(""),w=n.useRef(null),N=n.useRef(null),[z,B]=n.useState({x:0,y:0}),u=n.useMemo(()=>t?Array.isArray(r)?r:r?[r]:[]:r!==void 0?[r]:[],[r,t]),m=n.useMemo(()=>p.filter(e=>u.includes(e.id)),[p,u]),G=S!==void 0?S:!t,D=n.useMemo(()=>{if(!h)return p;const e=h.toLowerCase();return p.filter(s=>s.name.toLowerCase().includes(e)||s.details&&s.details.toLowerCase().includes(e))},[p,h]);n.useEffect(()=>{const e=s=>{w.current&&!w.current.contains(s.target)&&d(!1)};return i&&document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[i]);const R=e=>{if(!(e.disabled||f))if(t){const s=u.includes(e.id)?u.filter(b=>b!==e.id):[...u,e.id];v?.(s)}else v?.(e.id),G&&d(!1)},J=e=>{e.stopPropagation(),v?.(t?[]:"")},K=n.useCallback(()=>{if(!g||!x||f||!N.current)return;const{scrollTop:e,scrollHeight:s,clientHeight:b}=N.current;(e+b)/s>k&&g()},[g,x,f,k]),U=()=>{l||o==="hover"||o==="contextMenu"||d(!i)},Z=()=>{l||o!=="hover"||d(!0)},ee=()=>{l||o!=="hover"||d(!1)},ae=e=>{l||o!=="contextMenu"||(e.preventDefault(),B({x:e.clientX,y:e.clientY}),d(!0))},se=o==="contextMenu"?{position:"fixed",top:z.y,left:z.x,zIndex:9999}:{};return a.jsxs("div",{className:c("app-dropdown",`app-dropdown-size-${q}`,`app-dropdown-variant-${$}`,`app-dropdown-placement-${X}`,i&&"is-open",l&&"disabled",I),ref:w,onMouseEnter:Z,onMouseLeave:ee,onContextMenu:ae,style:Y,children:[o!=="contextMenu"&&a.jsxs("div",{className:c("app-dropdown-trigger",i&&"active",l&&"disabled"),onClick:U,children:[j&&a.jsx(j,{size:q==="sm"?16:18,className:"trigger-icon"}),a.jsx("div",{className:"trigger-content",children:m.length>0?t?a.jsxs("div",{className:"selected-tags",children:[m.slice(0,2).map(e=>a.jsx("span",{className:"selected-tag",children:e.name},e.id)),m.length>2&&a.jsxs("span",{className:"selected-tag-more",children:["+",m.length-2]})]}):a.jsx("span",{className:"trigger-text",children:m[0].name}):a.jsx("span",{className:"trigger-placeholder",children:A})}),a.jsxs("div",{className:"trigger-actions",children:[!l&&m.length>0&&a.jsx(L,{size:14,className:"clear-icon",onClick:J}),a.jsx(ne,{size:14,className:c("arrow-icon",i&&"rotated")})]})]}),i&&a.jsxs("div",{className:c("app-dropdown-menu",H),style:se,onClick:e=>e.stopPropagation(),children:[W&&(y||T)&&a.jsxs("div",{className:"menu-header",children:[y&&a.jsx("div",{className:"menu-label",children:y}),T]}),Q&&a.jsxs("div",{className:"menu-search-wrapper",children:[a.jsx(te,{size:14,className:"search-icon"}),a.jsx("input",{type:"text",className:"menu-search-input",placeholder:"Type to search...",value:h,onChange:e=>M(e.target.value),autoFocus:!0}),h&&a.jsx(L,{size:14,className:"search-clear",onClick:()=>M("")})]}),a.jsxs("div",{className:"menu-scroll",ref:N,onScroll:K,style:{maxHeight:F},children:[D.length>0?D.map(e=>{const s=u.includes(e.id);return V?a.jsx("div",{onClick:()=>R(e),className:c("custom-option-wrapper",e.disabled&&"disabled"),children:V(e,s)},e.id):a.jsxs("div",{className:c("menu-option",s&&"selected",e.disabled&&"disabled"),onClick:()=>R(e),children:[t&&a.jsx("div",{className:c("option-checkbox",s&&"checked"),children:s&&a.jsx(O,{size:12,strokeWidth:3})}),e.icon&&a.jsx("div",{className:"option-icon",children:e.icon}),a.jsxs("div",{className:"option-content",children:[a.jsx("span",{className:"option-name",children:e.name}),e.details&&a.jsx("span",{className:"option-details",children:e.details})]}),!t&&s&&a.jsx(O,{size:14,className:"check-icon"})]},e.id)}):a.jsx("div",{className:"no-options-found",children:f?a.jsx(P,{size:16}):_}),f&&x&&a.jsxs("div",{className:"menu-loading-more",children:[a.jsx(P,{size:16}),a.jsx("span",{children:"Loading more..."})]})]}),C&&a.jsx("div",{className:"menu-footer",children:C})]})]})};E.displayName="Dropdown";E.__docgenInfo={description:"",methods:[],displayName:"Dropdown",props:{options:{required:!1,tsType:{name:"Array",elements:[{name:"DropdownOption"}],raw:"DropdownOption[]"},description:"Array of options to display",defaultValue:{value:"[]",computed:!1}},value:{required:!1,tsType:{name:"union",raw:"string | number | (string | number)[]",elements:[{name:"string"},{name:"number"},{name:"Array",elements:[{name:"unknown"}],raw:"(string | number)[]"}]},description:"Current selected value(s)"},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: any) => void",signature:{arguments:[{type:{name:"any"},name:"value"}],return:{name:"void"}}},description:"Callback when value(s) change"},label:{required:!1,tsType:{name:"string"},description:"Label for the dropdown menu header"},showLabel:{required:!1,tsType:{name:"boolean"},description:"Whether to show the label/header in the menu. Default true if label exists.",defaultValue:{value:"true",computed:!1}},placeholder:{required:!1,tsType:{name:"string"},description:"Placeholder when no selection",defaultValue:{value:"'Select option'",computed:!1}},searchable:{required:!1,tsType:{name:"boolean"},description:"Whether search is enabled",defaultValue:{value:"false",computed:!1}},multiple:{required:!1,tsType:{name:"boolean"},description:"Support for multiple selection",defaultValue:{value:"false",computed:!1}},loading:{required:!1,tsType:{name:"boolean"},description:"Loading state",defaultValue:{value:"false",computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"Whether it's disabled",defaultValue:{value:"false",computed:!1}},trigger:{required:!1,tsType:{name:"union",raw:"'click' | 'hover' | 'contextMenu'",elements:[{name:"literal",value:"'click'"},{name:"literal",value:"'hover'"},{name:"literal",value:"'contextMenu'"}]},description:"Trigger type",defaultValue:{value:"'click'",computed:!1}},variant:{required:!1,tsType:{name:"union",raw:"'default' | 'outline' | 'ghost' | 'plain'",elements:[{name:"literal",value:"'default'"},{name:"literal",value:"'outline'"},{name:"literal",value:"'ghost'"},{name:"literal",value:"'plain'"}]},description:"Visual variant",defaultValue:{value:"'default'",computed:!1}},size:{required:!1,tsType:{name:"union",raw:"'sm' | 'md' | 'lg'",elements:[{name:"literal",value:"'sm'"},{name:"literal",value:"'md'"},{name:"literal",value:"'lg'"}]},description:"Size of the trigger",defaultValue:{value:"'md'",computed:!1}},placement:{required:!1,tsType:{name:"union",raw:"'bottom' | 'top'",elements:[{name:"literal",value:"'bottom'"},{name:"literal",value:"'top'"}]},description:"Dropdown placement: top or bottom",defaultValue:{value:"'bottom'",computed:!1}},icon:{required:!1,tsType:{name:"ComponentType",elements:[{name:"signature",type:"object",raw:"{ size?: number; className?: string }",signature:{properties:[{key:"size",value:{name:"number",required:!1}},{key:"className",value:{name:"string",required:!1}}]}}],raw:"ComponentType<{ size?: number; className?: string }>"},description:"Custom icon for the trigger"},footer:{required:!1,tsType:{name:"ReactNode"},description:"Custom footer element"},header:{required:!1,tsType:{name:"ReactNode"},description:"Custom header element inside the menu"},closeOnSelect:{required:!1,tsType:{name:"boolean"},description:"Whether to close the menu upon selection"},animationDuration:{required:!1,tsType:{name:"number"},description:"Animation duration in ms"},noOptionsContent:{required:!1,tsType:{name:"ReactNode"},description:"Custom content for no options found",defaultValue:{value:"'No results found'",computed:!1}},maxHeight:{required:!1,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:"Max height of the options list",defaultValue:{value:"300",computed:!1}},onLoadMore:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"Callback for lazy loading/pagination when scrolled to bottom"},hasMore:{required:!1,tsType:{name:"boolean"},description:"Whether there are more items to load",defaultValue:{value:"false",computed:!1}},loadMoreThreshold:{required:!1,tsType:{name:"number"},description:"Scroll threshold (0-1) to trigger onLoadMore. Default 0.8 (80%)",defaultValue:{value:"0.8",computed:!1}},className:{required:!1,tsType:{name:"string"},description:"Custom class for the container",defaultValue:{value:"''",computed:!1}},menuClassName:{required:!1,tsType:{name:"string"},description:"Custom class for the menu",defaultValue:{value:"''",computed:!1}},style:{required:!1,tsType:{name:"ReactCSSProperties",raw:"React.CSSProperties"},description:"Custom style for the container"},renderOption:{required:!1,tsType:{name:"signature",type:"function",raw:"(option: DropdownOption, isSelected: boolean) => ReactNode",signature:{arguments:[{type:{name:"DropdownOption"},name:"option"},{type:{name:"boolean"},name:"isSelected"}],return:{name:"ReactNode"}}},description:"Custom layout for options"}}};export{E as D};
