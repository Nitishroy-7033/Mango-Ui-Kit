import{j as e}from"./jsx-runtime-u17CrQMm.js";import{r as u}from"./iframe-QywSF6W6.js";import{c as y}from"./cn-BQHNewu7.js";import{C as I,F as R,a as P}from"./film-DCNc2lPl.js";import{P as k}from"./plus-D8H5l7vy.js";import{T as N}from"./trash-2--y-KK5Rq.js";import{B as T}from"./button-01qaZYzQ.js";import{S as W}from"./spinner-BLi69KHB.js";import{c as B}from"./createLucideIcon-B-6-c5fd.js";import{P as _}from"./progress-bar-BDDhuMYv.js";import{F as M}from"./file-text-n9cfvCak.js";import"./preload-helper-PPVm8Dsz.js";import"./settings-CE_Qmr37.js";const $=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],L=B("circle-play",$),V=(m={})=>{const{multiple:f=!0,maxSize:d=10,onFilesAdded:c,onFileRemoved:g,simulateProgress:v=!0}=m,[p,o]=u.useState([]),n=u.useCallback((s,t)=>{o(a=>a.map(l=>l.id===s?{...l,...t}:l))},[]),i=u.useCallback(s=>{let t=0;const a=setInterval(()=>{t+=Math.floor(Math.random()*30)+10,t>=100?(t=100,clearInterval(a),n(s,{status:"success",progress:100})):n(s,{progress:t})},400)},[n]),x=u.useCallback(s=>{const t=s.map(l=>{const q=Math.random().toString(36).substr(2,9),z=l.size>d*1024*1024,w={id:q,file:l,name:l.name,size:l.size,type:l.type,status:z?"error":"uploading",progress:0,error:z?`File exceeds ${d}MB limit`:void 0};if(l.type.startsWith("image/")){const C=new FileReader;C.onload=D=>{n(q,{thumbnail:D.target?.result})},C.readAsDataURL(l)}return w}),a=f?[...p,...t]:[t[0]];o(a),c?.(t),v&&t.forEach(l=>{l.status==="uploading"&&i(l.id)})},[p,d,f,c,v,i,n]),r=u.useCallback(s=>{o(t=>t.filter(a=>a.id!==s)),g?.(s)},[g]),h=u.useCallback(()=>{o([])},[]);return{files:p,processFiles:x,removeFile:r,updateFileState:n,clearFiles:h,setFiles:o}},U=({multiple:m=!0,maxSize:f=5,variant:d="button",label:c="Upload Image",aspectRatio:g="auto",onFilesAdded:v,onFileRemoved:p,disabled:o=!1,className:n=""})=>{const{files:i,processFiles:x,removeFile:r}=V({multiple:m,maxSize:f,onFilesAdded:v,onFileRemoved:p}),h=u.useRef(null),s=a=>{a.target.files&&x(Array.from(a.target.files)),a.target.value=""},t=()=>!o&&h.current?.click();return e.jsxs("div",{className:y("mango-image-uploader",`is-${d}`,n),children:[e.jsx("input",{type:"file",ref:h,onChange:s,accept:"image/*",multiple:m,hidden:!0}),d==="avatar"?e.jsxs("div",{className:y("avatar-trigger",o&&"is-disabled"),onClick:t,children:[i.length>0&&i[i.length-1].thumbnail?e.jsx("img",{src:i[i.length-1].thumbnail,alt:"avatar"}):e.jsx(I,{size:24}),e.jsx("div",{className:"overlay",children:e.jsx(k,{size:16})})]}):e.jsx("div",{className:"uploader-controls",children:e.jsx(T,{variant:"primary",onClick:t,disabled:o,icon:e.jsx(k,{size:18}),children:c})}),i.length>0&&d!=="avatar"&&e.jsx("div",{className:y("image-preview-grid",`ratio-${g.replace("/","-")}`),children:i.map(a=>e.jsx("div",{className:y("image-preview-item",`status-${a.status}`),children:a.status==="uploading"?e.jsxs("div",{className:"loading-state",children:[e.jsx(W,{size:24}),e.jsxs("span",{children:[a.progress,"%"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("img",{src:a.thumbnail||"",alt:a.name}),e.jsx("button",{className:"remove-btn",onClick:()=>r(a.id),children:e.jsx(N,{size:16})}),a.status==="error"&&e.jsx("div",{className:"error-overlay",title:a.error,children:"!"})]})},a.id))})]})};U.__docgenInfo={description:"",methods:[],displayName:"ImageUploader",props:{multiple:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},maxSize:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"5",computed:!1}},onFilesAdded:{required:!1,tsType:{name:"signature",type:"function",raw:"(files: UploadedFile[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"UploadedFile"}],raw:"UploadedFile[]"},name:"files"}],return:{name:"void"}}},description:""},onFileRemoved:{required:!1,tsType:{name:"signature",type:"function",raw:"(id: string) => void",signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"void"}}},description:""},label:{required:!1,tsType:{name:"ReactNode"},description:"",defaultValue:{value:"'Upload Image'",computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},className:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"''",computed:!1}},variant:{required:!1,tsType:{name:"union",raw:"'avatar' | 'grid' | 'button'",elements:[{name:"literal",value:"'avatar'"},{name:"literal",value:"'grid'"},{name:"literal",value:"'button'"}]},description:"",defaultValue:{value:"'button'",computed:!1}},aspectRatio:{required:!1,tsType:{name:"union",raw:"'1/1' | '16/9' | '4/3' | 'auto'",elements:[{name:"literal",value:"'1/1'"},{name:"literal",value:"'16/9'"},{name:"literal",value:"'4/3'"},{name:"literal",value:"'auto'"}]},description:"",defaultValue:{value:"'auto'",computed:!1}}}};const A=({multiple:m=!0,maxSize:f=100,label:d="Upload Video",onFilesAdded:c,onFileRemoved:g,disabled:v=!1,className:p=""})=>{const{files:o,processFiles:n,removeFile:i}=V({multiple:m,maxSize:f,onFilesAdded:c,onFileRemoved:g}),x=u.useRef(null);return e.jsxs("div",{className:y("mango-video-uploader",p),children:[e.jsx("input",{type:"file",ref:x,onChange:r=>r.target.files&&n(Array.from(r.target.files)),accept:"video/*",multiple:m,hidden:!0}),e.jsx(T,{variant:"outline",onClick:()=>x.current?.click(),disabled:v,icon:e.jsx(R,{size:18}),children:d}),e.jsx("div",{className:"video-list",children:o.map(r=>e.jsxs("div",{className:y("video-item",`is-${r.status}`),children:[e.jsx("div",{className:"video-icon",children:e.jsx(L,{size:24})}),e.jsxs("div",{className:"video-info",children:[e.jsx("span",{className:"name",children:r.name}),r.status==="uploading"&&e.jsx(_,{progress:r.progress,size:"xs",customColor:"var(--primaryColor)"}),r.status==="error"&&e.jsx("span",{className:"error-text",children:r.error})]}),e.jsx("button",{className:"remove-btn",onClick:()=>i(r.id),children:e.jsx(N,{size:18})})]},r.id))})]})};A.__docgenInfo={description:"",methods:[],displayName:"VideoUploader",props:{multiple:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},maxSize:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"100",computed:!1}},onFilesAdded:{required:!1,tsType:{name:"signature",type:"function",raw:"(files: UploadedFile[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"UploadedFile"}],raw:"UploadedFile[]"},name:"files"}],return:{name:"void"}}},description:""},onFileRemoved:{required:!1,tsType:{name:"signature",type:"function",raw:"(id: string) => void",signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"void"}}},description:""},label:{required:!1,tsType:{name:"ReactNode"},description:"",defaultValue:{value:"'Upload Video'",computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},className:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"''",computed:!1}},variant:{required:!1,tsType:{name:"union",raw:"'list' | 'compact'",elements:[{name:"literal",value:"'list'"},{name:"literal",value:"'compact'"}]},description:""},showDuration:{required:!1,tsType:{name:"boolean"},description:""}}};const S=({multiple:m=!0,maxSize:f=20,label:d="Upload Documents",allowFormats:c,onFilesAdded:g,onFileRemoved:v,disabled:p=!1,className:o=""})=>{const n=c?c.join(","):".pdf,.doc,.docx,.txt,.xls,.xlsx,.zip",{files:i,processFiles:x,removeFile:r}=V({multiple:m,maxSize:f,onFilesAdded:g,onFileRemoved:v}),h=u.useRef(null);return e.jsxs("div",{className:y("mango-document-uploader",o),children:[e.jsx("input",{type:"file",ref:h,onChange:s=>s.target.files&&x(Array.from(s.target.files)),accept:n,multiple:m,hidden:!0}),e.jsx(T,{variant:"dashed",onClick:()=>h.current?.click(),disabled:p,icon:e.jsx(M,{size:18}),fullWidth:!0,children:d}),e.jsx("div",{className:"document-list",children:i.map(s=>e.jsxs("div",{className:y("doc-item",`is-${s.status}`),children:[e.jsx(P,{size:20,className:"doc-icon"}),e.jsxs("div",{className:"doc-info",children:[e.jsx("span",{className:"name",children:s.name}),e.jsxs("span",{className:"size",children:[(s.size/1024).toFixed(1)," KB"]})]}),e.jsx("div",{className:"actions",children:e.jsx("button",{className:"remove-btn",onClick:()=>r(s.id),children:e.jsx(N,{size:16})})})]},s.id))})]})};S.__docgenInfo={description:"",methods:[],displayName:"DocumentUploader",props:{multiple:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},maxSize:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"20",computed:!1}},onFilesAdded:{required:!1,tsType:{name:"signature",type:"function",raw:"(files: UploadedFile[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"UploadedFile"}],raw:"UploadedFile[]"},name:"files"}],return:{name:"void"}}},description:""},onFileRemoved:{required:!1,tsType:{name:"signature",type:"function",raw:"(id: string) => void",signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"void"}}},description:""},label:{required:!1,tsType:{name:"ReactNode"},description:"",defaultValue:{value:"'Upload Documents'",computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},className:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"''",computed:!1}},allowFormats:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""}}};const re={title:"Components/SpecializedUploaders",parameters:{layout:"padded"},tags:["autodocs"]},j={render:()=>e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"40px",maxWidth:"600px"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{fontWeight:700,marginBottom:"12px"},children:"Profile Avatar Mode"}),e.jsx(U,{variant:"avatar",multiple:!1})]}),e.jsxs("div",{children:[e.jsx("p",{style:{fontWeight:700,marginBottom:"12px"},children:"Photo Gallery (Grid)"}),e.jsx(U,{label:"Add Photos",variant:"button"})]})]})},b={render:()=>e.jsxs("div",{style:{maxWidth:"500px"},children:[e.jsx("p",{style:{fontWeight:700,marginBottom:"12px"},children:"Course Video Upload"}),e.jsx(A,{label:"Upload MP4",maxSize:500})]})},F={render:()=>e.jsxs("div",{style:{maxWidth:"500px"},children:[e.jsx("p",{style:{fontWeight:700,marginBottom:"12px"},children:"Legal Documents (PDF/Zip)"}),e.jsx(S,{label:"Drop Agreements Here"})]})};j.parameters={...j.parameters,docs:{...j.parameters?.docs,source:{originalSource:`{
  render: () => <div style={{
    display: 'flex',
    flexDirection: 'column',
    gap: '40px',
    maxWidth: '600px'
  }}>\r
            <div>\r
                <p style={{
        fontWeight: 700,
        marginBottom: '12px'
      }}>Profile Avatar Mode</p>\r
                <ImageUploader variant="avatar" multiple={false} />\r
            </div>\r
\r
            <div>\r
                <p style={{
        fontWeight: 700,
        marginBottom: '12px'
      }}>Photo Gallery (Grid)</p>\r
                <ImageUploader label="Add Photos" variant="button" />\r
            </div>\r
        </div>
}`,...j.parameters?.docs?.source}}};b.parameters={...b.parameters,docs:{...b.parameters?.docs,source:{originalSource:`{
  render: () => <div style={{
    maxWidth: '500px'
  }}>\r
            <p style={{
      fontWeight: 700,
      marginBottom: '12px'
    }}>Course Video Upload</p>\r
            <VideoUploader label="Upload MP4" maxSize={500} />\r
        </div>
}`,...b.parameters?.docs?.source}}};F.parameters={...F.parameters,docs:{...F.parameters?.docs,source:{originalSource:`{
  render: () => <div style={{
    maxWidth: '500px'
  }}>\r
            <p style={{
      fontWeight: 700,
      marginBottom: '12px'
    }}>Legal Documents (PDF/Zip)</p>\r
            <DocumentUploader label="Drop Agreements Here" />\r
        </div>
}`,...F.parameters?.docs?.source}}};const te=["ImageVariations","VideoUploaderStory","DocumentUploaderStory"];export{F as DocumentUploaderStory,j as ImageVariations,b as VideoUploaderStory,te as __namedExportsOrder,re as default};
